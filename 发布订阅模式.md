## 不同的语言-相同的模式

最近在看设计模式的知识，而且在工作当中，做一些打点需求的时候，正好直接利用了发布订阅模式去实现的，我对发布订阅这种设计模式更加的感兴趣了，于是借此机会也会大家说说这个好东东吧！

其实在早期还是用jq开发的时代，有很多地方，我们都会出现发布订阅的影子，例如有trigger和on方法。

再到现在的vue中，emit和on方法。它们都似乎不约而同的自带了发布订阅属性一般，让开发变得更加高效好用起来。

那么废话不多说，先来看看发布订阅模式到底是何方神圣吧。

## 发布订阅模式

说道发布订阅模式，它其实是一种对象间一对多的依赖关系（不是综艺节目以一敌百那种），当一个对象的状态发送改变时，所有依赖于它的对象都将得到状态改变的通知。

正所谓，字数不多，不代表作用不大，按继续来看下它的作用。

###作用

1. 广泛应用于异步编程中（替代了传递回调函数）
2. 对象之间松散耦合的编写代码

就这两点吗？没错，点不在多，够用就行。我们都知道有一句很著名的谚语，罗马不是一天建成的。

### 自定义事件

```javascript
let corp = {};	// 自定义一个公司对象
// 这里放一个列表用来缓存回调函数
corp.list = [];
// 去订阅事件
corp.on = function(fn){
    // 二话不说，直接把fn先存放到列表中
    this.list.push(fn);
};
// 发布事件
corp.emit = function(){
    // 当发布的时候再把列表里存的函数依次执行
    this.list.forEach(cb => {
        cb.apply(this, arguments);
    });
};
// 测试用例

```

